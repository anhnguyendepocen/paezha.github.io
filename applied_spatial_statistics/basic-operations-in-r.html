<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Applied Spatial Statistics</title>
  <meta name="description" content="This book was created as a resource for teaching applied spatial statistics at McMaster University by Antonio Paez, with support from Anastassios Dardas and Rajiv Ubhi.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Applied Spatial Statistics" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book was created as a resource for teaching applied spatial statistics at McMaster University by Antonio Paez, with support from Anastassios Dardas and Rajiv Ubhi." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Applied Spatial Statistics" />
  
  <meta name="twitter:description" content="This book was created as a resource for teaching applied spatial statistics at McMaster University by Antonio Paez, with support from Anastassios Dardas and Rajiv Ubhi." />
  

<meta name="author" content="Antonio Paez">


<meta name="date" content="2018-12-03">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="introduction-to-mapping-in-r.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>
<script src="libs/lfx-heat-0.1.0/lfx-heat-prod.js"></script>
<script src="libs/lfx-heat-0.1.0/lfx-heat-bindings.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="basic-operations-in-r.html"><a href="basic-operations-in-r.html"><i class="fa fa-check"></i><b>1</b> Basic Operations in R</a><ul>
<li class="chapter" data-level="1.1" data-path="basic-operations-in-r.html"><a href="basic-operations-in-r.html#learning-objectives"><i class="fa fa-check"></i><b>1.1</b> Learning objectives</a></li>
<li class="chapter" data-level="1.2" data-path="basic-operations-in-r.html"><a href="basic-operations-in-r.html#rstudio-window"><i class="fa fa-check"></i><b>1.2</b> RStudio Window</a></li>
<li class="chapter" data-level="1.3" data-path="basic-operations-in-r.html"><a href="basic-operations-in-r.html#some-basic-operations"><i class="fa fa-check"></i><b>1.3</b> Some basic operations</a></li>
<li class="chapter" data-level="1.4" data-path="basic-operations-in-r.html"><a href="basic-operations-in-r.html#data-classes-in-r"><i class="fa fa-check"></i><b>1.4</b> Data Classes in R</a></li>
<li class="chapter" data-level="1.5" data-path="basic-operations-in-r.html"><a href="basic-operations-in-r.html#data-types-in-r"><i class="fa fa-check"></i><b>1.5</b> Data Types in R</a></li>
<li class="chapter" data-level="1.6" data-path="basic-operations-in-r.html"><a href="basic-operations-in-r.html#indexing-and-data-transformations"><i class="fa fa-check"></i><b>1.6</b> Indexing and Data Transformations</a></li>
<li class="chapter" data-level="1.7" data-path="basic-operations-in-r.html"><a href="basic-operations-in-r.html#visualization"><i class="fa fa-check"></i><b>1.7</b> Visualization</a></li>
<li class="chapter" data-level="1.8" data-path="basic-operations-in-r.html"><a href="basic-operations-in-r.html#creating-a-simple-map"><i class="fa fa-check"></i><b>1.8</b> Creating a simple map</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-mapping-in-r.html"><a href="introduction-to-mapping-in-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to Mapping in R</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-mapping-in-r.html"><a href="introduction-to-mapping-in-r.html#learning-objectives-1"><i class="fa fa-check"></i><b>2.1</b> Learning objectives</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-mapping-in-r.html"><a href="introduction-to-mapping-in-r.html#preliminaries"><i class="fa fa-check"></i><b>2.2</b> Preliminaries</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-mapping-in-r.html"><a href="introduction-to-mapping-in-r.html#packages"><i class="fa fa-check"></i><b>2.3</b> Packages</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-mapping-in-r.html"><a href="introduction-to-mapping-in-r.html#exploring-dataframes-and-a-simple-proportional-symbols-map"><i class="fa fa-check"></i><b>2.4</b> Exploring dataframes and a simple proportional symbols map</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-mapping-in-r.html"><a href="introduction-to-mapping-in-r.html#improving-on-the-proportional-symbols-map"><i class="fa fa-check"></i><b>2.5</b> Improving on the proportional symbols map</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-mapping-in-r.html"><a href="introduction-to-mapping-in-r.html#some-simple-spatial-analysis"><i class="fa fa-check"></i><b>2.6</b> Some simple spatial analysis</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-mapping-in-r.html"><a href="introduction-to-mapping-in-r.html#other-resources"><i class="fa fa-check"></i><b>2.7</b> Other resources</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-mapping-in-r.html"><a href="introduction-to-mapping-in-r.html#references"><i class="fa fa-check"></i><b>2.8</b> References</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Applied Spatial Statistics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="basic-operations-in-r" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Basic Operations in R</h1>
<p>NOTE: This is an <a href="http://rmarkdown.rstudio.com">R Markdown</a> Notebook. When you execute code within the notebook, the results appear beneath the code.</p>
<p>Now that you have installed R and RStudio we can begin with an overview of basic operations and data structures in this computing language. Please note that this document you are reading, called an R Notebook, is an example of what is called “literate programming”, a style of document that uses code to illustrate a discussion, as opposed to the traditional programming style that uses natural language to discuss/document the code. It flips around the usual technical writing approach to make it more intuitive and accessible.</p>
<p>Whenever you see a chunk of code as follows, you can run it (by clicking the ‘play’ icon on the top right corner) to see the results. Try it!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="st">&quot;Hello, Geography 4GA3&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Hello, Geography 4GA3&quot;</code></pre>
<p>The chunk of code above instructed R (and trough R the computer) to <code>print</code> (or display on the screen) some text.</p>
<div id="learning-objectives" class="section level2">
<h2><span class="header-section-number">1.1</span> Learning objectives</h2>
<p>In this practice, you will learn:</p>
<ol style="list-style-type: decimal">
<li>How to install R.</li>
<li>Basic operations in R.</li>
<li>Data classes, data types, and data transformations.</li>
<li>About packages in R.</li>
<li>Basic visualization.</li>
</ol>
</div>
<div id="rstudio-window" class="section level2">
<h2><span class="header-section-number">1.2</span> RStudio Window</h2>
<p>If you are reading this, you probably already read the document ‘00 Installation of R’. We can now proceed to discuss some basic concepts of operations and data types.</p>
</div>
<div id="some-basic-operations" class="section level2">
<h2><span class="header-section-number">1.3</span> Some basic operations</h2>
<p>R can perform many types of operations. Some simple operations are arithmetic. Other are logical. And so on.</p>
<p>For instance, R can be instructed to conduct sums, as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>R can be instructed to do multiplications:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>And sequences of operations, using brackets to indicate their order. Compare the following two expressions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span></code></pre></div>
<pre><code>## [1] 11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>(<span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span>)</code></pre></div>
<pre><code>## [1] 16</code></pre>
<p>Other operations produce logical results (values of true and false):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">3</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">3</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>And of course, you can combine operations in an expression:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>(<span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>As you can see, R can be used as a calculator, but it is much more powerful than that.</p>
<p>We can also create <em>variables</em>. You can think of a variable as a box with a name, whose contents can change. Variables are used to keep track of important stuff in your calculations, and to automate operations. To create a variable, a value is assigned to a name, using this notation <code>&lt;-</code>. You can read this <code>x &lt;- 2</code> as “assign value of 2 to a variable called x”. For instance:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">2</span>
y &lt;-<span class="st"> </span><span class="dv">3</span>
z &lt;-<span class="st"> </span><span class="dv">5</span></code></pre></div>
<p>Check your “Global Environment”, the tab where the contents of your “Workspace” are displayed for you. You can also simply type the name of the variable in the Console to see its contents. Now that we have some variables with values, we can express operations as follows (same as above)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">*</span><span class="st"> </span>y <span class="op">+</span><span class="st"> </span>z</code></pre></div>
<pre><code>## [1] 11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">*</span><span class="st"> </span>(y <span class="op">+</span><span class="st"> </span>z)</code></pre></div>
<pre><code>## [1] 16</code></pre>
<p>However, if we wanted, we could change the values of any of <code>x</code>, <code>y</code>, and/or <code>z</code> and repeat the operations. This allows to automate some instructions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">4</span>
x <span class="op">*</span><span class="st"> </span>y <span class="op">+</span><span class="st"> </span>z</code></pre></div>
<pre><code>## [1] 17</code></pre>
</div>
<div id="data-classes-in-r" class="section level2">
<h2><span class="header-section-number">1.4</span> Data Classes in R</h2>
<p>R can work with different data classes, including:</p>
<ul>
<li>Numerical</li>
<li>Character</li>
<li>Logical</li>
<li>Factor</li>
</ul>
<p>This allows you to store information in different forms, which can be useful. For instance, you may want to save some text:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">name &lt;-<span class="st"> &quot;Hamilton&quot;</span></code></pre></div>
<p>Or numerical information:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">population &lt;-<span class="st"> </span><span class="dv">551751</span></code></pre></div>
<p>If you wish to check what class an object is, you can use the function <code>class</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(name)</code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(population)</code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
</div>
<div id="data-types-in-r" class="section level2">
<h2><span class="header-section-number">1.5</span> Data Types in R</h2>
<p>R can work with different data types, including scalars (essentially matrices with only one element), vectors (matrices with one dimension of size 1) and matrices (more generally.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="st">&#39;This is a scalar&#39;</span>)</code></pre></div>
<pre><code>## [1] &quot;This is a scalar&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="st">&#39;This is a vector&#39;</span>)</code></pre></div>
<pre><code>## [1] &quot;This is a vector&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="st">&#39;This is a matrix&#39;</span>)</code></pre></div>
<pre><code>## [1] &quot;This is a matrix&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>),<span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4</code></pre>
<p>The command <code>c()</code> is used to concatenate the arguments. The command <code>matrix()</code> creates a matrix with the specified number of rows and columns.</p>
<p>An important data type in R is a data frame. A data frame is a table consisting of rows and columns - commonly a set of vectors that have been collected for convenience. A data frame is used to store data in digital format. (If you have used Excel or another spreadsheet software before, data frames will be familiar to you: they look a lot like a sheet in a spreadsheet.)</p>
<p>A data frame can accommodate large amounts of information (several billion individual items). The data can be numeric, character, logical, and so on. Each grid cell in a data frame has an address that can be identified based on the row and column it belongs to. R can use these addresses to perform mathematical operations. R labels columns alphabetically and rows numerically (or less commonly alphabetically).</p>
<p>To illustrate a data frame, let us first create the following vectors, that include names, populations, average salaries, and coordinates of some cities:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Name &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Hamilton&#39;</span>,<span class="st">&#39;Waterloo&#39;</span>,<span class="st">&#39;Toronto&#39;</span>)
Population &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">551751</span>, <span class="dv">219153</span>, <span class="dv">2731571</span>)
AvgSalary &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">45692</span>, <span class="dv">57625</span>, <span class="dv">48920</span>)
Latitude &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">43.255203</span>, <span class="fl">43.4668</span>, <span class="fl">43.6532</span>)
Longitude &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="fl">79.843826</span>, <span class="op">-</span><span class="fl">80.51639</span>, <span class="op">-</span><span class="fl">79.3832</span>)</code></pre></div>
<p>Again, note that <code>&lt;-</code> is an assignment. In other words, it assigns the item on the right to the name on the left.</p>
<p>After you execute the chunk of code above, you will notice that new values appear in your Environment. These are five vectors of size 1:3, one that is composed of alphanumeric information (or chr, for ‘character’) and four columns that are numeric (num).</p>
<p>These vectors can be collected in a dataframe. This is done for convenience, so we know that all these data belong together in some way. Please note that to create a data frame, the vectors must have the same length. In other words, you cannot create a table with elements that have different numbers of rows (other data types allow you to do this, but not data frames).</p>
<p>We will now create a data frame. We will call it “Cities”. There are rules for names, but in most cases it helps if the names are intuitive and easy to remember. The function used to create a data frame is <code>data.frame()</code> and the arguments are the vectors that we wish to collect there.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Cities &lt;-<span class="st"> </span><span class="kw">data.frame</span>(Name, Population, AvgSalary, Latitude, Longitude)</code></pre></div>
<p>After running the chunk above, now you have a new object in your environment, namely a data frame called <code>Cities</code>.</p>
<p>If you double clic on <code>Cities</code> in the Environment tab, you will see that this data frame has five columns (labeled <code>Name</code>, <code>Population</code>, <code>AvgSalary</code>, <code>Latitude</code>, and <code>Longitude</code>), and three rows. You can enter data into a data frame and then use the many built-in functions of R to perform various types of analysis.</p>
<p>Please note that <code>Name</code>, which was an alphanumeric vector, was converted to a <em>factor</em> in the data frame. A factor is a way to store nominal variables that may have two or more <em>levels</em>. In the present case, the factor variable has three levels, corresponding to three cities. If we had information for multiple years, each city might appear more than once, for each year that information was available.</p>
</div>
<div id="indexing-and-data-transformations" class="section level2">
<h2><span class="header-section-number">1.6</span> Indexing and Data Transformations</h2>
<p>Data frames store information that is related in a compact way.</p>
<p>To perform operations effectively, it is useful to understand the way R locates information in a data frame. As noted before, each grid cell has an address, or in other words an index, that can be referenced in several convenient ways. For instance, assume that you wish to reference the first value of the data frame, in other words, row 1 of column <code>Name</code>. To do this, you would go use the following instruction:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Cities[<span class="dv">1</span>,<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] Hamilton
## Levels: Hamilton Toronto Waterloo</code></pre>
<p>This will recall the element in the first row and first column of <code>Cities</code>.</p>
<p>As an alternative, you could type:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Cities<span class="op">$</span>Name[<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] Hamilton
## Levels: Hamilton Toronto Waterloo</code></pre>
<p>As you see, this has the same effect. The string sign <code>$</code> is used to reference columns in a data frame. Therefore, R will call the first element of <code>Name</code> in data frame <code>Cities</code>.</p>
<p><code>Cities[1,2]</code> is identical to <code>Cities$Name[2]</code>. Try changing the code in the chunk and executing. If you type <code>Cities$Name</code>, R will recall the full column.</p>
<p>Indexing is useful to conduct operations. Suppose for instance, that you wished to calculate the total population of two cities, say Hamilton and Waterloo. You can execute the following instructions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Cities<span class="op">$</span>Population[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>Cities<span class="op">$</span>Population[<span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] 770904</code></pre>
<p>(More involved indexing is also possible, for example, if we use logical operators. Do not worry too much about the details, but you can verify that the results are identical)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Cities<span class="op">$</span>Population[Cities<span class="op">$</span>Name<span class="op">==</span><span class="st">&#39;Hamilton&#39;</span>] <span class="op">+</span><span class="st"> </span>Cities<span class="op">$</span>Population[Cities<span class="op">$</span>Name<span class="op">==</span><span class="st">&#39;Waterloo&#39;</span>]</code></pre></div>
<pre><code>## [1] 770904</code></pre>
<p>Suppose that you wanted to calculate the total population of the cities in your data frame. To do this, you would use the instruction <code>sum</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(Cities<span class="op">$</span>Population)</code></pre></div>
<pre><code>## [1] 3502475</code></pre>
<p>You have already seen how it allows you to store in memory the results of some instruction, by means of an assignment <code>&lt;-</code>. You can also perform many other useful operations. For instance, calculate the maximum value for a set of values:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">max</span>(Cities<span class="op">$</span>Population)</code></pre></div>
<pre><code>## [1] 2731571</code></pre>
<p>And, if you wanted to find which city is the one with the largest population, you would use a logical statement as an index:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Cities<span class="op">$</span>Name[Cities<span class="op">$</span>Population<span class="op">==</span><span class="kw">max</span>(Cities<span class="op">$</span>Population)]</code></pre></div>
<pre><code>## [1] Toronto
## Levels: Hamilton Toronto Waterloo</code></pre>
<p>As you see, Toronto is the largest city (by population) in this dataset. Using indexing in imaginative ways provides a way to do fairly sophisticated data analysis.</p>
<p>Likewise, the function for finding the minimum value for a set of values is <code>min</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(Cities<span class="op">$</span>Population)</code></pre></div>
<pre><code>## [1] 219153</code></pre>
<p>Try calculating the average of the population of the cities, using the command <code>mean</code>. Use the empty chunk below for this (the result should be 1167492):</p>
<p>Finding the maximum and minimum, aggregating (calculating the sum of a series of values), and finding the average are examples of transformations applied to the data. They give insights into aspects of the dataset that are not evident from the raw data.</p>
</div>
<div id="visualization" class="section level2">
<h2><span class="header-section-number">1.7</span> Visualization</h2>
<p>The data frame, in essence a table, informative as it is, may not be the best way to learn from the data. Visualization is often a valuable complement to data analysis. Say, we might be interested in finding which city has the largest population and which city has the smallest population. We could achieve this by using similar instructions as before, for example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(<span class="st">&#39;The city with the largest population is&#39;</span>,Cities<span class="op">$</span>Name[Cities<span class="op">$</span>Population<span class="op">==</span><span class="kw">max</span>(Cities<span class="op">$</span>Population)])</code></pre></div>
<pre><code>## [1] &quot;The city with the largest population is Toronto&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(<span class="st">&#39;The city with the smallest population is&#39;</span>, Cities<span class="op">$</span>Name[Cities<span class="op">$</span>Population<span class="op">==</span><span class="kw">min</span>(Cities<span class="op">$</span>Population)])</code></pre></div>
<pre><code>## [1] &quot;The city with the smallest population is Waterloo&quot;</code></pre>
<p>(Note that <code>paste</code> is similar to <code>print</code>, except that it converts everything to characters before printing. We use this command because the contents of <code>Name</code> in data frame <code>Cities</code> are not characters, but levels.)</p>
<p>A more convenient way of understanding these data is by visualizing them, using for instance a bar chart.</p>
<p>We will proceed to create a bar chart, using a package called <code>ggplot2</code>. This package implements a grammar of graphics, and is a very flexible way of creating plots in R. Since <code>ggplot2</code> is a package, we first must ensure that it is installed. You can install it using the command <code>install</code> as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</code></pre></div>
<p>As an alternative, you can use the Packages tab in RStudio. Simply navigate to the tab, click install, and select <code>ggplot2</code> from there. Note that you need to install the package only once! Essentially <code>install</code> adds it to your library of packages, where it will remain available.</p>
<p>Once the package is installed, it becomes available, but to use it you must load it in memory. For this, we use the command <code>library()</code>, which is used to load a package, that is, to activate it for use.</p>
<p>Assuming that you already have installed <code>ggplot2</code>, we proceed to load it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)</code></pre></div>
<p>Now all commands from the <code>ggplot2</code> package are available to you.</p>
<p>This package works by layering a series of objects, beginning with a blank plot, to which we can add things. The command to create a plot is <code>ggplot()</code>. This command accepts different arguments. For instance, we can pass data to it in the form of a data frame. We can also indicate different <em>aesthetic</em> values, that is, the things that we wish to plot. None of this is plotted, though, until we indicate which kind of <em>geom</em> or geometric object we wish to plot.</p>
<p>For a bar chart, we would use the following instructions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> Cities, <span class="kw">aes</span>(<span class="dt">x =</span> Name, <span class="dt">y =</span> Population)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&#39;identity&#39;</span>)</code></pre></div>
<p><img src="01-Reading-Basic-Operations-and-Data-Structures_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>Let us break down these instructions. We are asking <code>ggplot2</code> to create a plot that will use the data frame <code>Cities</code>. Furthermore, we tell it to use the values of <code>Names</code> in the x-axis, and the values of <code>Population</code> in the y-axis. Run the following chunk:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> Cities, <span class="kw">aes</span>(<span class="dt">x =</span> Name, <span class="dt">y =</span> Population))</code></pre></div>
<p><img src="01-Reading-Basic-Operations-and-Data-Structures_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>Notice how <code>ggplot2</code> creates a blank plot, but it has yet to actually render any of the population information in there. We layer elements on a plot by using the <code>+</code> sign. It is only when we tell the package to add some geometric element that it renders something on the plot. In the previous case, we told <code>ggplot2</code> to draw bars (by using the <code>geom_bar</code> command). The argument of <code>geom_bar</code> was <code>stat = 'identity'</code>, to indicate that the data for the y-axis was to be used ‘as-is’ without further statistical transformations.</p>
<p>There are many different geoms that can be used in <code>ggplot2</code>. You can always consult the help/tutorial files by typing <code>??ggplot2</code> in the console. See:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">??ggplot2</code></pre></div>
<pre><code>## starting httpd help server ... done</code></pre>
</div>
<div id="creating-a-simple-map" class="section level2">
<h2><span class="header-section-number">1.8</span> Creating a simple map</h2>
<p>We will see how maps are used in spatial statistical analysis. The simplest one that can be created is a so-called <em>dot map</em> that displays the location of an event of interest. A dot map is, in fact, simply a scatterplot of the coordinates of events. We can use ggplot2 to create a simple dot map of the cities in your simple dataset. For this, we create a ggplot object, and for the x and y aesthetics we use the coordinates. The geometric element that we want to render is a point:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> Cities, <span class="kw">aes</span>(<span class="dt">x =</span> Longitude, <span class="dt">y =</span> Latitude)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="01-Reading-Basic-Operations-and-Data-Structures_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>This is a simple dot map that simply shows the locations of the cities. We can add labels by means of the geometric element text:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> Cities, <span class="kw">aes</span>(<span class="dt">x =</span> Longitude, <span class="dt">y =</span> Latitude)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> Name))</code></pre></div>
<p><img src="01-Reading-Basic-Operations-and-Data-Structures_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<p>A <em>proportional symbol map</em> changes the size of the symbols to add information to the plot. To create a proportional symbol map, we add to the aesthetics the instruction to use some variable for the size of the symbols:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> Cities, <span class="kw">aes</span>(<span class="dt">x =</span> Longitude, <span class="dt">y =</span> Latitude)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> Population)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> Name))</code></pre></div>
<p><img src="01-Reading-Basic-Operations-and-Data-Structures_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<p>And fix the position of the labels by adding a vertical justification to the text (<code>vjust</code>) and expanding the limits of the plot (<code>expand_limits</code>):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> Cities, <span class="kw">aes</span>(<span class="dt">x =</span> Longitude, <span class="dt">y =</span> Latitude)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> Population)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> Name), <span class="dt">vjust =</span> <span class="dv">2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">expand_limits</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">80.7</span>, <span class="op">-</span><span class="fl">79.2</span>), <span class="dt">y =</span> <span class="kw">c</span>(<span class="fl">43.2</span>, <span class="fl">43.7</span>))</code></pre></div>
<p><img src="01-Reading-Basic-Operations-and-Data-Structures_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<p>You have now created a relatively simple proportional symbols map! You can see that creating a plot is simply a matter of instructing R (through ggplot2) to complete a series of instructions:</p>
<ul>
<li><p>Create a <code>ggplot2</code> object using a dataset, which will render stuff at locations given by variable1 and variable 2: <code>ggplot(data = dataset, aes(x = variable1, y = variable2))</code></p></li>
<li><p>Add stuff to the plot. For instance, to add points use <code>geom_point</code>, to add lines use <code>geom_line</code>, and so on.</p></li>
</ul>
<p>Check the <code>ggplot2</code> <a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">Cheat Sheet</a> for more information on how to use this package.</p>
<p>A last note. Many other visualization alternatives (for instance, Excel) provide point-and-click functions for creating plots. In contrast, <code>ggplot2</code> in R requires that the plot be created by meticulously instructing the package what to do. While this is more laborious, it also means that you have complete control over the creation of plots, which in turn allows you to create more flexible and inventive visuals.</p>
<p>This concludes your basic overview of basic operations and data structures in R. You will have an opportunity to learn more about creating maps in R with your reading.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-mapping-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
